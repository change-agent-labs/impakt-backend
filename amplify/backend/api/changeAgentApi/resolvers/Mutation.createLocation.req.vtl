{
    "version" : "2017-02-28",
    "operation" : "PutItem",
     #set( $orgRangeVal = "${ctx.args.input.org}::${ctx.args.input.range}" )
     "key": {
        "orgRangeKey": { "S" : "$orgRangeVal"},
        "id": { "S" : "${context.arguments.input.org}-location-$util.base64Encode(${context.arguments.input.range})" }
    },
    #set( $attr = $util.dynamodb.toMapValues($ctx.args.input) )
    #set( $attr.modifiedAt = $util.dynamodb.toString($util.time.nowISO8601()) )
    #set( $attr.doc_type = $util.dynamodb.toString("location"))
    #set( $attr.docTypeOrgRangeKey = $util.dynamodb.toString("location::$orgRangeVal"))
    #set( $attr.docTypeOrgKey = $util.dynamodb.toString("location::${ctx.args.input.org}"))
    "attributeValues" : $util.toJson($attr),
    "condition" : {
      "expression" : "attribute_not_exists(orgRangeKey) and attribute_not_exists(id)"
   }
}
